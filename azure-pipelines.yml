variables:
  os.vmImage: 'ubuntu-18.04'

pool:
  vmImage: '$(os.vmImage)'

jobs:
- job: a
  steps:
  - script: echo a
  - script: echo skipped
    condition: and(succeeded(), ne(variables['skip1'], 'true'))
  - script: echo succeeded
    condition: and(succeeded(), ne(variables['skip2'], 'true'))

- job: b
  condition: and(succeeded(), ne(variables['skip1'], 'true'))
  dependsOn: a
  steps:
  - script: echo b

- job: c
  condition: and(succeeded(), ne(variables['skip2'], 'true'))
  dependsOn: b
  steps:
  - script: echo c

- job: d
  condition: and(failed(), ne(variables['skip2'], 'true'))
  dependsOn: b
  steps:
  - script: echo d
